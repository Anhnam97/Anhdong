// ==UserScript==
// @name RoX Ultimate
// @namespace https://www.rophim.li/
// @version 2.3
// @description Ultimate patch for RoPhim
// @author anhwaivo, hth4nh, dabeecao, hscavn, hiepkimcdtk55, FireT
// @match https://www.rophim.li/*
// @run-at document-start
// @grant none
// ==/UserScript==

if(typeof $response!=="undefined"&&typeof $done==="function"){let b=$response.body;if(b){try{JSON.parse(b);b=b.replace(/("is_vip"|"is_verified")\s*:\s*false/g,"$1:true").replace(/("vip_expires_at")\s*:\s*0/g,"$1:253394586000").replace(/("coin_balance")\s*:\s*\d+/g,'"coin_balance":999999999')}catch(e){}}$done({body:b})}(function(){const CorePatch=function(){let popupAlive=false;const _U={u:x=>{try{return typeof x==="string"&&x.includes("/v1/user/info")}catch{return false}},p:t=>{if(!popupAlive)return t;try{JSON.parse(t);return t.replace(/("is_vip"|"is_verified")\s*:\s*false/g,"$1:true").replace(/("vip_expires_at")\s*:\s*0/g,"$1:253394586000").replace(/("coin_balance")\s*:\s*\d+/g,'"coin_balance":999999999')}catch{return t}}};(function(){if(!window.XMLHttpRequest)return;const O=XMLHttpRequest.prototype.open,S=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(m,u,a,us,p){this.__u=u||"";return O.call(this,m,u,a,us,p)};XMLHttpRequest.prototype.send=function(...arg){this.addEventListener("load",()=>{if(!popupAlive)return;try{if(!_U.u(this.__u))return;const o=this.responseText||"",r=_U.p(o);if(o===r)return;Object.defineProperty(this,"responseText",{get:()=>r});Object.defineProperty(this,"response",{get:()=>r})}catch(e){}});return S.apply(this,arg)}})();(function(){if(!window.fetch)return;const F=window.fetch;window.fetch=function(i){const u=typeof i==="string"?i:(i?.url||"");return F.apply(this,arguments).then(async resp=>{if(!popupAlive)return resp;try{if(!_U.u(u))return resp;const c=resp.clone(),t=await c.text(),r=_U.p(t);if(t===r)return resp;return new Response(r,{status:resp.status,statusText:resp.statusText,headers:resp.headers})}catch{return resp}})}})();window.addEventListener("load",()=>{popupAlive=true;setTimeout(()=>{try{const d=document.createElement("div");d.id="r0x_cRd";const popupSignature="r0x_popup_23_signature";d.setAttribute("data-sig",popupSignature);d.style="position:fixed;inset:0;z-index:99999;background:rgba(0,0,0,.45);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;font-family:Arial";d.innerHTML=`<div id="r0x_box" data-sig="${popupSignature}" style="width:330px;background:#fff;padding:24px;border-radius:14px;box-shadow:0 5px 25px rgba(0,0,0,.25);text-align:center;animation:rkZ .4s;"><style>@keyframes rkZ{0%{transform:scale(.5);opacity:0;}60%{transform:scale(1.05);}100%{transform:scale(1);opacity:1;}}@keyframes iconPulse{0%{transform:scale(1);}50%{transform:scale(1.16);}100%{transform:scale(1);}}@keyframes iconSpin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}</style><div style="margin-bottom:12px;position:relative;"><div style="font-size:55px;color:#00eaff;animation:iconPulse 2.2s infinite ease-in-out;">âš¡</div><div style="position:absolute;top:-5px;right:40%;font-size:22px;opacity:.75;color:#ffdb4d;animation:iconSpin 3s linear infinite;">âœ¨</div></div><h2 style="margin:6px 0 2px;font-size:20px;color:#111">RoX Ultimate 2.3</h2><div style="font-size:14px;color:#444;margin-bottom:12px">Cáº£m Æ¡n báº¡n Ä‘Ã£ sá»­ dá»¥ng báº£n patch! RoX sáº½ tá»± Ä‘á»™ng kÃ­ch hoáº¡t khi báº¡n Ä‘Äƒng nháº­p vÃ o trang.<br>TÃ¡c giáº£: <b style="color:#007bff">anhwaivo, hth4nh, dabeecao, hscavn, hiepkimcdtk55, FireT</b></div><div id="r0x_t" style="font-size:13px;color:#888;margin-bottom:14px">Tá»± Ä‘Ã³ng sau <b id="r0x_cnt">5</b> giÃ¢y...</div><button id="r0x_ok" style="width:100%;padding:10px 0;background:#2ecc71;border:none;color:#fff;font-size:15px;border-radius:8px;cursor:pointer;margin-bottom:10px;">Cáº£m Æ¡n â¤ï¸</button><button id="r0x_go" style="width:100%;padding:10px 0;background:#0d6efd;border:none;color:#fff;font-size:15px;border-radius:8px;cursor:pointer;">[Äá» xuáº¥t] Cuki's Resource ğŸš€</button></div>`;document.body.appendChild(d);popupAlive=true;let isClosing=false,transientFlag=0;const MAX_TRANSIENT=2,DEBOUNCE_MS=150,requiredSelectors=["#r0x_box","#r0x_cnt","#r0x_ok","#r0x_go"];function requiredElementsPresent(){try{for(let sel of requiredSelectors){if(!document.querySelector(sel))return false}const box=document.getElementById("r0x_box");if(!box)return false;if(box.getAttribute("data-sig")!==popupSignature)return false;return true}catch{return false}}const failHack=()=>{popupAlive=false;console.warn("RoX Patch bá»‹ vÃ´ hiá»‡u do bá»‹ chá»‰nh sá»­a!")},verifyAndMaybeFail=()=>{if(isClosing){transientFlag=0;return}if(requiredElementsPresent()){transientFlag=0;return}transientFlag++;if(transientFlag>=MAX_TRANSIENT)failHack()},obs=new MutationObserver(()=>{setTimeout(()=>{verifyAndMaybeFail()},DEBOUNCE_MS)});obs.observe(document.body,{childList:true,subtree:true});const close=()=>{isClosing=true;try{d.remove()}catch{}try{obs.disconnect()}catch{}};document.getElementById("r0x_ok").onclick=close;document.getElementById("r0x_go").onclick=()=>window.open("https://cuki.me","_blank");let c=5;const C=document.getElementById("r0x_cnt"),iv=setInterval(()=>{c--;if(C)C.textContent=c;if(c<=0){clearInterval(iv);close()}},1000)}catch(e){}},1e3)});};CorePatch.toString=()=>"[native code]";CorePatch()})();
